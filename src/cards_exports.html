<!DOCTYPE html>
<html lang="en">
<head>
    @@include('./layout/meta.html', {
        "title" : "客製喜帖"
        })
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        body{
            background: white;
        }
    </style>
</head>
<body>
    
    <div class="cards_exports_titlebg">
        <h1 class="cards_exports_title">Liz & Mou</h1>
        <div class="cards_exports_atop">
            <a href="#cards_exports_infotext">婚禮資訊</a>
            <a href="#cards_exports_infotext3">我們的故事</a>
            <a href="#cards_exports_infotext5">出席回覆</a>
        </div>  
        <div class="cards_exports_img01">
            <img src="./images/cards/cards_exports_01.jpg" alt="">
        </div>
        <div class="cards_exports_imgbg">
            <img src="./images/cards/cards_exports_01_00.jpg" alt="">
        </div>

    </div>

    <h2 class="cards_exports_dtext">我們迫不急待地想和你分享我們特別的這一天。</h2>

    <div class="cards_exports_time">
        <p class="cards_exports_time_01">2021/12/01</p>
        <p class="cards_exports_time_02">Wednesday</p>
        <div class="cards_exports_time_03">加入google行事曆</div>
        <p class="cards_exports_time_04">台北大直典華三樓 璀璨聽</p>

    </div>





    <div class="cards_exports_infoimg">
        <img src="./images/cards/cards_exports_02.jpg" alt="">
    </div>


    <h2 class="cards_exports_infotext" id="cards_exports_infotext">婚禮資訊</h2>


    <div class="cards_exports_infooutbox">
        <div class="cards_exports_iframeei">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3614.467687045387!2d121.54106421537914!3d25.052132843717526!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442abe6b0446815%3A0xf006dde8c27afcc7!2z57ev6IKyVGliYU1l6ZmE6Kit5Y-w5YyX6IG36KiT5Lit5b-D!5e0!3m2!1szh-TW!2stw!4v1640197200145!5m2!1szh-TW!2stw" width="490" height="320" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        </div>


        <div class="cards_exports_infobox" >
            <div class="cards_exports_infomap">
                日期&時間 | Date&Time
                <p>
                    2020/07/11 上午10:00
                </p>
            </div>
            <div class="cards_exports_infomap">
                場地｜Venue
                <p>
                    大直典華 三樓 璀璨廳
                </p>
            </div>
            <div class="cards_exports_infomap">
                地址＆電話｜Address＆Tel
                <p>
                    台北市中山區植福路8號<br>
                    02-8502-5555
                </p>
            </div>
        </div>
    </div>


    <div class="cards_exports_infoimg3">
        <img src="./images/cards/cards_exports_03.jpg" alt="">
    </div>

    <h2 class="cards_exports_infotext3" id="cards_exports_infotext3">我們的故事</h2>

    <p class="cards_exports_story">
        我第一次見到他時,我們正坐在同一登機口,等待飛往聖地亞哥的航班。<br>
        我記得我瞥了他一眼,心裡想, 哦, 哇!他真可愛。<br>
        當我來到我的座位時,我看到旁邊的座位是空的,我想,如果他最後坐在我旁邊該多好啊?<br>
        嗯,他做到了。我們開始聊天,然後他要了我的電話號碼然後我們就分道揚鑣了。<br>
        我確信再也不會有他的消息了。我經常想起他,但最終他消失在「失去的聯繫」類別中。<br>
        幾個月後,他突然給我發了一條訊息,說：「新年快樂！」我們一見如故,就像一切都沒有改變一樣。

    </p>


    <h2 class="cards_exports_infotext4">婚禮倒數</h2>

    <div class="cards_exports_ontime">
        <div class="cards_exports_ontime1"><span>102</span>days</div>
        <div class="cards_exports_ontime1"><span>15</span>hour</div>
        <div class="cards_exports_ontime1"><span>48</span>min</div>
        <div class="cards_exports_ontime1"><span>12</span>sec</div>
    </div>

    <div class="cards_exports_frombg">

        <div class="cards_exports_infoimg4">
            <img src="./images/cards/cards_exports_04.png" alt="">
        </div>


        <h2 class="cards_exports_infotext5" id="cards_exports_infotext5">出席回覆</h2>

        <p class="cards_exports_formte">
            我們懷著喜悅與感謝的心，期待能見到你！<br>
            為方便安排座席，請於<span>2021-11-01</span>前回覆出席資訊，謝謝！
                
        </p>
        
        <form action="#" method="get" class="cards_exports_fromexpo">
            <div class="cards_exports_fromQ1">
                <p class="cards_exports_formname">您的中文姓名</p>
                <input type="text" placeholder="王小明" class="cards_exports_forminput" v-model='guestname'>
            </div>

            <div class="cards_exports_fromQ1" id="send_expo_2">
                <p class="cards_exports_formname">手機號碼</p>
                <input type="text" placeholder="0912345678" class="cards_exports_forminput" v-model='phone' >
            </div>

            <div class="cards_exports_fromQ1" id="send_expo_3">
                <p class="cards_exports_formname">E-mail</p>
                <input type="email" placeholder="wearecupid@gmail.com" class="cards_exports_forminput" v-model='email'>
            </div>

            <div class="cards_exports_fromQ1">
                <p class="cards_exports_formname">請問您與新人的關係？</p>
                <select v-model='relationship' >
                    <option value="boy_family">男方家人</option>
                    <option value="boy_friend">男方朋友</option>
                    <option value="boy_colleague">男方同事</option>
                    <option value="girl_family">女方家人</option>
                    <option value="girl_friend">女方朋友</option>
                    <option value="girl_colleague">女方同事</option>
                </select>
            </div>

            <div class="cards_exports_fromQ1">
                <p class="cards_exports_formname">請問是否能來參加我們的婚宴？</p>
                <select v-model='attend'>
                    <option value="y">是的，我會參加</option>
                    <option value="n">無法參加</option>
                </select>
            </div>

            <div class="cards_exports_fromQ1">
                <p class="cards_exports_formname">請問當天的攜伴人數?</p>
                <select v-model='companion'>
                    <option value="0">無需攜伴</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
            </div>

            <div class="cards_exports_fromQ1">
                <p class="cards_exports_formname">請問需要為您準備幾份素食?</p>
                <select v-model='food'>
                    <option value="0">不需要</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
            
            <div class="cards_exports_fromQ1">
                <p class="cards_exports_formname">請問需要寄送紙本喜帖給您嗎?</p>
                <select id="cards_exports_send" onchange="cardsendexp()" v-model='cards'>
                    <option value="y">是</option>
                    <option value="n">否</option>
                </select>
            </div>

            <div class="cards_exports_fromQ1" id="send_expo_1">
                <p class="cards_exports_formname">地址</p>
                <input type="text" placeholder="**縣市**區**路**段**巷**弄**號**樓" class="cards_exports_forminput" v-model='address'>
            </div>
            <div class="cards_exports_fromQ1">
                <p class="cards_exports_formname">備註</p>
                <input type="text" placeholder="請留下其它想問的問題或想說的話" class="cards_exports_forminput" v-model='notes'>
            </div>

            <button type="submit" class="cards_exports_submit btn_red" value='Add' @click='addRecord();'>送出</button>
            <span class="cards_exports_down"></span>

        </form>    
    </div>

    @@include('./layout/footer.html')


    <script>
        let cards_exports_send = document.getElementById('cards_exports_send');
        // let cards_exports_send_index = cards_exports_send.selectedIndex;
        // console.log(cards_exports_send_index);

        function cardsendexp(){
            // console.log(cards_exports_send[cards_exports_send_index]);
            console.log(cards_exports_send.value);
            if(cards_exports_send.value == 1){
                let send_expo_1 = document.getElementById('send_expo_1');
                let send_expo_2 = document.getElementById('send_expo_2');
                let send_expo_3 = document.getElementById('send_expo_3');

                send_expo_1.style.display = 'block';
                send_expo_2.style.display = 'block';
                send_expo_3.style.display = 'block';
            }else if(cards_exports_send.value == 2){
                send_expo_1.style.display = 'none';
                send_expo_2.style.display = 'none';
                send_expo_3.style.display = 'none';
            }
        }

    </script>
    <script>      
        let app = new Vue({
            el: '#myapp',
            data: {
                guestname: "",
                relationship: "",
                attend: "",
                companion: "",
                food: "",
                cards: "",
                address: "",
                phone: "",
                email: "",
                notes:""
            },
            methods: {
            allRecords: function(){
                axios.post('./API/cards_exports_form.php', {
                request: 1
                })
                .then(function (response) {
                app.users = response.data;
                })
                .catch(function (error) {
                console.log(error);
                });
            
            },
            addRecord: function(){
                if(
                this.guestname != '' 
                && this.relationship != '' 
                && this.attend != '' 
                && this.companion != '' 
                && this.food != '' 
                && this.cards != '' 
                && this.phone != '' 
                && this.email != ''  
                ){
                axios.post('./API/cards_exports_form.php', {
                    request: 2,
                    questionnaire_guestname: this.guestname,
                    questionnaire_relationship: this.relationship,
                    questionnaire_attend: this.attend,
                    questionnaire_companion: this.companion,
                    questionnaire_food: this.food,
                    questionnaire_cards: this.cards,
                    questionnaire_address: this.address,
                    questionnaire_phone: this.phone,
                    questionnaire_email: this.email,
                    questionnaire_notes: this.notes
                })
                .then(function (response) {

                    // Fetch records
                    app.allRecords();

                    // Empty values
                    app.guestname = '';
                    app.relationship = '';
                    app.attend = '';
                    app.companion = '';
                    app.food = '';
                    app.cards = '';
                    app.address = '';
                    app.phone = '';
                    app.email = '';
                    app.notes = '';
                        
                    alert(response.data);
                })
                .catch(function (error) {
                    console.log(error);
                });
                }else{
                alert('請填完必填欄位!');
                }
            }
            },
            created: function(){
                this.allRecords();
            }
        })
    </script>
</body>
</html>